---
title: 《MySQL必知必会》读书笔记
tags:
  - MySQL
id: '103'
categories:
  - - 读书笔记
date: 2019-01-28 12:05:41
---

_《MySQL必知必会》_读书笔记记录。
<!-- more -->
## 了解MySQL

*   数据库软件应称为DBMS(数据库管理系统)， 数据库是通过DBMS创建和操纵的容器。
*   数据库是一个以某种有组织的方式存储的数据集合。
*   数据库中的每个表名都是唯一的， 用来标识自己。
*   数据类型帮助正确地排序数据， 在优化磁盘使用方面起着重要作用。
*   主键(primary key)能够唯一区分表中的每一行。 没有主键， 更新或删除表中的特定行很困难， 因为没有安全的方法保证只涉及相关的行。

## MySQL入门

*   登录MySQL使用: `mysql -u root -h 127。0。0。1 -P 3306 -p`来登录。
*   命令用`;`或`\g`结束， 否则按下`<Enter>`不会执行命令。

## 使用MySQL

*   `SHOW DATABASES;`显示所有可用数据库的列表。
*   必须先使用`USE`打开数据库， 才能读取其中的数据。
*   `SHOW TABLES;`返回当前选择的数据库内可用表的列表。
*   `SHOW STATUS;`显示广泛的服务器状态信息。
*   `HELP SHOW;`用于显示允许的`SHOW`命令。

## 检索数据

*   在处理SQL语句时， 其中所有空格都被忽略， SQL语句可以在一行上给出， 也可以分成许多行。 多数SQL开发人员认为将SQL语句分成多行更容易阅读和理解。
*   在选择多个列时， 一定要在列表之间加上逗号， 但最后一个列名后不加。
*   一般情况， 除非确实需要表中的每个列， 否则最好不要使用`*`通配符。 虽然使用通配符可能会使自己省事， 不用明确列出所需列， 但检索不需要的列通常会降低检索和应用程序的性能。
*   为了返回第一行或前几行， 可使用`LIMIT`子句。
*   使用`DISTINCT`返回当前列的不同(唯一)行。
*   `LIMIT5，5`表示MySQL返回从行5开始的5行。 第一个是开始的位置， 第二个数是要检索的行数。

## 排序检索数据

*   为了明确地排序用`SELECT`语句检索出的数据， 可以使用`ORDER BY`子句， `ORDER BY`子句取一个或多个列的名字， 据此对输出进行排序。
*   降序排序使用`DESC`关键字。

## 过滤条件

*   使用`BETWEEN`时， 必须指定两个值， 所需范围的低端值和高端值， 这两个值必须用`AND`关键字分割。
*   在`WHERE`子句中使用园括号。 任何时候使用具有`AND`和`OR`操作符的`WHERE`子句， 都应该使用圆括号明确的分组操作符， 可以消除歧义。
*   `IN`的最大优点是可以包含其他`SELECT`语句，使得可以更动态的建立`WHERE`子句。
*   不要过度使用通配符， 其他操作符能达到相同的目的， 应该使用其他操作符。

## MySQL正则表达式

*   `LIKE`匹配整个串， 而`REGEXP`匹配子串。
*   多数正则表达式实现使用单个反斜杠转义特殊字符， 以便能使用这些字符本身， 但MySQL要求两个反斜杠， 一个给MySQL自己用， 一个给正则表达式用。
*   `[^123]`匹配除方括号内以外的任何东西。

## 其他总结

*   `SQL`支持别名， 用`AS`关键字赋予。
*   `SUM()`用来返回指定列值得总和。
*   学过所有类型的`WHERE`子句都可以使用`HAVING`替代， 唯一的差别是`WHERE过滤行`， 而`HAVING`过滤分组。
*   联结是一种机制，用来在一条`SELECT`语句中关联表，因此称之为联结。
*   `UNION`从查询结果集中自动去除了重复的行，它的行为与单条`SELCT`语句中使用多个`WHERE`子句条件一样。它是`UNION`的默认行为，如果想返回所有行，可以使用`UNION ALL`。
*   最常使用的引擎为`MyISAM`和`InnoDB`，前者支持全文本搜索。
*   不要在导入数据时使用`FULLTEXT`。
*   在更新多个列时，只需要使用单个`SET`命令，每个`列-值`对之间用逗号隔开，最后一个不使用逗号。
*   `TRUNCATE`是删除原来的表并重新更新创建一个表。
*   在使用`UPDATE`或`DELETE`语句前，应先使用`SELECT`语句进行测试，保证更新和删除的是正确的记录。防止`WHERE`条件不正确。
*   事务（`transaction`）指一组SQL语句。事务处理是一种机制，用来管理必须成批执行的MySQL操作。以保证数据库不包括不完整的操作结果。利用事务处理，可以保证一组操作不会中途停止。它们或者作为整体执行，或者完全不执行（除非明确指示）。如果没有错误发生，整组语句提交给（写到）数据库表。如果发生错误，则进行回退（撤销）以恢复数据库到某个已知且安全的状态。
*   InnoDB是一个可靠的事务处理引擎，但不支持全文搜索。MyISAM是一个性能极高的引擎，它支持全文搜索，但不支持事务处理。
*   NULL无值（no value），和字段为空字符，仅包含空格不同。
*   更新表定义可使用`ALTER TABLE`语句，但是在理想状态下，当表中存储数据后，该表就不该再被更新。在表的设计过程中需要花费大量时间来考虑，以便后期不再对表进行大的改动。
*   视图是虚拟的表，与包含数据的表不一样。视图只包含使用时动态检索数据的查询。
*   视图最常见的应用之一是隐藏复杂的SQL，通常会设计联结。
*   `LONTEXT`和`TEXT`相同，但最大长度为4GB。